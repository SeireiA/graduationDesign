{"version":3,"file":"index.js","sources":["components/mp-html/components/mp-html/markdown/index.js"],"sourcesContent":["/**\n * @fileoverview markdown 插件\n * Include marked (https://github.com/markedjs/marked)\n * Include github-markdown-css (https://github.com/sindresorhus/github-markdown-css)\n */\nimport marked from './marked.min'\nlet index = 0\n\nfunction Markdown (vm) {\n  this.vm = vm\n  vm._ids = {}\n}\n\nMarkdown.prototype.onUpdate = function (content) {\n  if (this.vm.markdown) {\n    return marked(content)\n  }\n}\n\nMarkdown.prototype.onParse = function (node, vm) {\n  if (vm.options.markdown) {\n    // 中文 id 需要转换，否则无法跳转\n    if (vm.options.useAnchor && node.attrs && /[\\u4e00-\\u9fa5]/.test(node.attrs.id)) {\n      const id = 't' + index++\n      this.vm._ids[node.attrs.id] = id\n      node.attrs.id = id\n    }\n    if (node.name === 'p' || node.name === 'table' || node.name === 'tr' || node.name === 'th' || node.name === 'td' || node.name === 'blockquote' || node.name === 'pre' || node.name === 'code') {\n      node.attrs.class = `md-${node.name} ${node.attrs.class || ''}`\n    }\n  }\n}\n\nexport default Markdown\n"],"names":["marked"],"mappings":";;AAMA,IAAI,QAAQ;AAEZ,SAAS,SAAU,IAAI;AACrB,OAAK,KAAK;AACV,KAAG,OAAO,CAAE;AACd;AAEA,SAAS,UAAU,WAAW,SAAU,SAAS;AAC/C,MAAI,KAAK,GAAG,UAAU;AACpB,WAAOA,wDAAAA,OAAO,OAAO;AAAA,EACtB;AACH;AAEA,SAAS,UAAU,UAAU,SAAU,MAAM,IAAI;AAC/C,MAAI,GAAG,QAAQ,UAAU;AAEvB,QAAI,GAAG,QAAQ,aAAa,KAAK,SAAS,kBAAkB,KAAK,KAAK,MAAM,EAAE,GAAG;AAC/E,YAAM,KAAK,MAAM;AACjB,WAAK,GAAG,KAAK,KAAK,MAAM,EAAE,IAAI;AAC9B,WAAK,MAAM,KAAK;AAAA,IACjB;AACD,QAAI,KAAK,SAAS,OAAO,KAAK,SAAS,WAAW,KAAK,SAAS,QAAQ,KAAK,SAAS,QAAQ,KAAK,SAAS,QAAQ,KAAK,SAAS,gBAAgB,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAC7L,WAAK,MAAM,QAAQ,MAAM,KAAK,IAAI,IAAI,KAAK,MAAM,SAAS,EAAE;AAAA,IAC7D;AAAA,EACF;AACH;;"}