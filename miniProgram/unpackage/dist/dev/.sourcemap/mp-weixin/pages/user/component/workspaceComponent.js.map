{"version":3,"file":"workspaceComponent.js","sources":["pages/user/component/workspaceComponent.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovMC9iZWlmZW4vMC8wRmlsZXMvMjAyNeetlOi-qS90cy10cy9taW5pUHJvZ3JhbS9wYWdlcy91c2VyL2NvbXBvbmVudC93b3Jrc3BhY2VDb21wb25lbnQudnVl"],"sourcesContent":["<template>\n  <view class=\"workspace\">\n    <view @click=\"handleChangeWorkspaceActive(0)\">\n      <view :class=\"workspaceActive===0?'workspace-view-active':'workspace-view-default'\">作品集</view>\n      <view :class=\"workspaceActive===0?'workspace-underline':''\"/>\n    </view>\n    <view @click=\"handleChangeWorkspaceActive(1)\">\n      <view :class=\"workspaceActive===1?'workspace-view-active':'workspace-view-default'\">最近任务</view>\n      <view :class=\"workspaceActive===1?'workspace-underline':''\"/>\n    </view>\n  </view>\n\n  <view class=\"workspace-container\" @touchend=\"handleTouchWorkspaceEnd\" @touchstart=\"handleTouchWorkspaceStart\">\n    <view v-show=\"workspaceActive===0\">\n      <custom-waterfalls-flow v-if=\"props.workflowsWorksData.length>0\" ref=\"workflowsWorksRef\"\n                              :value=\"props.workflowsWorksData\"\n                              @imageClick=\"handleToPreviewPage\"\n      >\n        <view v-for=\"(item,index) in props.workflowsWorksData\" :key=\"index\" slot=\"slot{{index}}\">\n          <view class=\"waterfalls-flow\">\n            <view v-if=\"item.resultType==='VIDEO'\">\n              视频\n            </view>\n            <view v-if=\"item.resultType==='MODEL'\">\n              模型\n            </view>\n            <view v-if=\"item.resultType==='AUDIO'\">\n              音频\n            </view>\n            <view v-if=\"item.resultType==='IMAGE'\">\n              图像\n            </view>\n          </view>\n        </view>\n      </custom-waterfalls-flow>\n      <EmptyDataComponent v-else :height=\"50\" msg=\"没有绘制过任何作品\"/>\n    </view>\n    <view v-show=\"workspaceActive===1\">\n      <view v-if=\"drawingTaskData.length>0\">\n        <view v-for=\"(item,index) in drawingTaskData\" :key=\"index\">\n          <view v-if=\"item.status==='SUCCEED'\" class=\"task-container\">\n            <view v-if=\"item.resultType==='MODEL'||item.resultType==='AUDIO'\">\n              <view class=\"padding-task-image-view\">\n                <image :src=\"item.url\"\n                       mode=\"aspectFill\"/>\n              </view>\n            </view>\n            <view v-else>\n              <image :src=\"item.url\" class=\"task-image\"\n                     mode=\"aspectFill\"/>\n            </view>\n            <view class=\"task-flex\">\n              <view class=\"task-title\">{{ item.workflowsName }}</view>\n              <view v-if=\"item.resultType==='VIDEO'\" class=\"task-label\">视频</view>\n              <view v-if=\"item.resultType==='IMAGE'\" class=\"task-label\">图片</view>\n              <view v-if=\"item.resultType==='MODEL'\" class=\"task-label\">模型</view>\n              <view v-if=\"item.resultType==='AUDIO'\" class=\"task-label\">音频</view>\n              <view class=\"task-date\">\n                <view>创建于{{ conversionTime(new Date(item.createTime)) }}</view>\n                <view class=\"task-btn\" @click=\"handleToPreviewPage(item)\">\n                  预览\n                </view>\n              </view>\n            </view>\n          </view>\n          <view v-if=\"item.status==='WAIT'\" class=\"task-container\">\n            <view>\n              <view class=\"task-image wait\">\n                列队中\n              </view>\n            </view>\n            <view class=\"task-flex\">\n              <view class=\"task-title\">{{ item.workflowsName }}</view>\n              <view class=\"task-label\">当前任务排在{{ item.location }}位</view>\n              <view class=\"task-date\">\n                <view>创建于{{ conversionTime(new Date(item.createTime)) }}</view>\n              </view>\n            </view>\n          </view>\n          <view v-if=\"item.status==='BUILD'\" class=\"task-container\">\n            <view>\n              <view class=\"task-image build\">\n                {{ item.progress }}%\n              </view>\n            </view>\n            <view class=\"task-flex\">\n              <view class=\"task-title\">{{ item.workflowsName }}</view>\n              <view class=\"task-label\">构建中</view>\n              <view class=\"task-date\">\n                <view>创建于{{ conversionTime(new Date(item.createTime)) }}</view>\n              </view>\n            </view>\n          </view>\n          <view v-if=\"item.status==='FAILED'\" class=\"task-container\">\n            <view>\n              <image class=\"task-image\" mode=\"aspectFill\" src=\"/static/svg/errorImage.svg\"/>\n            </view>\n            <view class=\"task-flex\">\n              <view class=\"task-title\">{{ item.workflowsName }}</view>\n              <view class=\"task-label\">构建失败</view>\n              <view class=\"task-date\">\n                <view>创建于{{ conversionTime(new Date(item.createTime)) }}</view>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <EmptyDataComponent v-else :height=\"50\" msg=\"单个任务会保留24小时\"/>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport {defineEmits, defineExpose, defineProps, ref} from 'vue'\nimport {conversionTime} from \"@/utils/date\";\nimport EmptyDataComponent from \"@/components/emptyDataComponent.vue\";\n\nconst workflowsWorksRef = ref(null)\n\nconst props = defineProps({\n  workspaceActive: {\n    type: Number\n  },\n  workflowsWorksData: {\n    type: Array\n  },\n  drawingTaskData: {\n    type: Array\n  }\n});\n\nconst emits = defineEmits(['changeWorkspaceActive']);\n\n\nconst tabSlide = ref({\n  startTime: 0,\n  startX: 0,\n  startY: 0\n})\n\nconst handleChangeWorkspaceActive = (active) => {\n  emits('changeWorkspaceActive', active)\n}\n\nconst handleToPreviewPage = (e) => {\n  uni.navigateTo({\n    url: '/pages/drawing/view/drawingPreviewView?workflowsWorksId=' + e.workflowsWorksId\n  })\n}\n\nconst handleTouchWorkspaceStart = (e) => {\n  tabSlide.value.startTime = Date.now()\n  let changedTouch = e.changedTouches[0];\n  tabSlide.value.startX = changedTouch.clientX\n  tabSlide.value.startY = changedTouch.clientY\n}\n\nconst handleTouchWorkspaceEnd = (e) => {\n  let endTime = Date.now();\n  let changedTouch = e.changedTouches[0];\n  let clientX = changedTouch.clientX;\n  let clientY = changedTouch.clientY;\n  if (endTime - tabSlide.value.startTime > 1000) {\n    return\n  }\n  if (Math.abs(clientX - tabSlide.value.startX) > 10 && Math.abs(clientY - tabSlide.value.startY) < 10) {\n    if (clientX - tabSlide.value.startX > 0) {\n      if (props.workspaceActive !== 0) {\n        emits('changeWorkspaceActive', 0)\n      }\n\n    } else {\n      if (props.workspaceActive !== 1) {\n        emits('changeWorkspaceActive', 1)\n      }\n\n    }\n  }\n}\n\nconst handleWorkflowsWorksRefresh = () => {\n  if (workflowsWorksRef.value) {\n    workflowsWorksRef.value.refresh()\n  }\n}\n\ndefineExpose(\n    {handleWorkflowsWorksRefresh}\n)\n\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.workspace {\n  padding: 30rpx;\n  display: flex;\n  font-weight: bold;\n  font-size: 25rpx\n}\n\n.build {\n  background: linear-gradient(120deg, rgb(239, 95, 97) 1%, rgb(186, 42, 107) 66.24%, rgb(184, 54, 189) 97.8%);;\n  animation: gradient 4s ease infinite;\n  background-size: 200% 200%;\n  font-size: 26rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white\n}\n\n.waterfalls-flow {\n  background-color: #161817;\n  padding-top: 10rpx;\n  padding-bottom: 10rpx;\n  display: flex\n}\n\n.waterfalls-flow > view {\n\n  border: 1rpx solid #555555;\n  border-radius: 10rpx;\n  color: whitesmoke;\n  font-weight: bold;\n  padding: 8rpx 8rpx;\n  font-size: 20rpx\n}\n\n.wait {\n  font-size: 26rpx;\n  background: #161817;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white\n}\n\n.task-flex {\n  padding-left: 20rpx;\n  flex: 1\n}\n\n.task-title {\n  color: whitesmoke;\n  font-size: 30rpx;\n  font-weight: bold\n}\n\n.task-label {\n  color: #989898;\n  font-size: 25rpx;\n  padding-top: 20rpx\n}\n\n.task-date {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  color: #989898;\n  font-size: 25rpx;\n  padding-top: 20rpx\n}\n\n.task-btn {\n  font-weight: bold;\n  background: #333335;\n  font-size: 27rpx;\n  border-radius: 13rpx;\n  padding: 8rpx 25rpx;\n  color: #bababa\n}\n\n.task-container {\n  background: #242426;\n  width: 100%;\n  border-radius: 20rpx;\n  display: flex;\n  align-items: flex-start;\n  padding: 10rpx;\n  margin-bottom: 20rpx;\n}\n\n.task-image {\n  border-radius: 10rpx;\n  width: 150rpx;\n  height: 150rpx;\n  object-fit: cover\n}\n\n.padding-task-image-view {\n  width: 150rpx;\n  height: 150rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n}\n\n\n.padding-task-image-view > image {\n\n  width: 120rpx;\n  height: 120rpx;\n  object-fit: cover\n}\n\n.workspace-view-default {\n  color: #909090;\n  transition: color 0.5s ease;\n}\n\n.workspace-view-active {\n  color: #ffffff;\n  transition: color 0.5s ease;\n}\n\n\n.workspace > view {\n  margin-right: 30rpx;\n  transition: background 0.5s ease;\n\n}\n\n.workspace-underline {\n  margin: 0 20rpx;\n  border-bottom: 5rpx solid #fedbe2;\n  transition: border-bottom 0.5s ease;\n  padding-top: 10rpx\n}\n\n.workspace-container {\n  padding: 5rpx 30rpx 30rpx;\n  min-height: 50vh;\n}\n\n.workspace-container > view {\n  width: 100%;\n  height: 200rpx;\n  animation: fadeIn 1s ease-in-out forwards;\n}\n\n@keyframes gradient {\n  0% {\n    background-position: 0 12%;\n  }\n\n  50% {\n    background-position: 100% 100%;\n  }\n\n  100% {\n    background-position: 0 12%;\n  }\n}\n</style>\n","import Component from 'E:/0/beifen/0/0Files/2025答辩/ts-ts/miniProgram/pages/user/component/workspaceComponent.vue'\nwx.createComponent(Component)"],"names":["ref","uni"],"mappings":";;;;;;;;;;;;AAmHA,MAAM,qBAAqB,MAAW;;;;;;;;;;;;;;;;AAEtC,UAAM,oBAAoBA,cAAG,IAAC,IAAI;AAElC,UAAM,QAAQ;AAYd,UAAM,QAAQ;AAGd,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,QAAQ;AAAA,IACV,CAAC;AAED,UAAM,8BAA8B,CAAC,WAAW;AAC9C,YAAM,yBAAyB,MAAM;AAAA,IACvC;AAEA,UAAM,sBAAsB,CAAC,MAAM;AACjCC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,6DAA6D,EAAE;AAAA,MACxE,CAAG;AAAA,IACH;AAEA,UAAM,4BAA4B,CAAC,MAAM;AACvC,eAAS,MAAM,YAAY,KAAK,IAAK;AACrC,UAAI,eAAe,EAAE,eAAe,CAAC;AACrC,eAAS,MAAM,SAAS,aAAa;AACrC,eAAS,MAAM,SAAS,aAAa;AAAA,IACvC;AAEA,UAAM,0BAA0B,CAAC,MAAM;AACrC,UAAI,UAAU,KAAK;AACnB,UAAI,eAAe,EAAE,eAAe,CAAC;AACrC,UAAI,UAAU,aAAa;AAC3B,UAAI,UAAU,aAAa;AAC3B,UAAI,UAAU,SAAS,MAAM,YAAY,KAAM;AAC7C;AAAA,MACD;AACD,UAAI,KAAK,IAAI,UAAU,SAAS,MAAM,MAAM,IAAI,MAAM,KAAK,IAAI,UAAU,SAAS,MAAM,MAAM,IAAI,IAAI;AACpG,YAAI,UAAU,SAAS,MAAM,SAAS,GAAG;AACvC,cAAI,MAAM,oBAAoB,GAAG;AAC/B,kBAAM,yBAAyB,CAAC;AAAA,UACjC;AAAA,QAEP,OAAW;AACL,cAAI,MAAM,oBAAoB,GAAG;AAC/B,kBAAM,yBAAyB,CAAC;AAAA,UACjC;AAAA,QAEF;AAAA,MACF;AAAA,IACH;AAEA,UAAM,8BAA8B,MAAM;AACxC,UAAI,kBAAkB,OAAO;AAC3B,0BAAkB,MAAM,QAAS;AAAA,MAClC;AAAA,IACH;AAEA;AAAA,MACI,EAAC,4BAA2B;AAAA,IAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3LA,GAAG,gBAAgB,SAAS;"}