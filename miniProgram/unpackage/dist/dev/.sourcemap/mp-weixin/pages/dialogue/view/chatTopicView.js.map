{"version":3,"file":"chatTopicView.js","sources":["pages/dialogue/view/chatTopicView.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGlhbG9ndWUvdmlldy9jaGF0VG9waWNWaWV3LnZ1ZQ"],"sourcesContent":["<script setup>\nimport {ref} from 'vue'\nimport {onLoad} from '@dcloudio/uni-app'\nimport {getChatTopic, setChatTopic} from \"@/store/chatTopic\";\n\nconst data = ref({\n  other: [],\n  today: [],\n  yesterday: []\n})\n\nconst handoffTopic = (id) => {\n\n  const chatTopic = getChatTopic();\n  const index = chatTopic.array.findIndex(item => item.id === id);\n  chatTopic.index = index\n  const content = chatTopic.array[index].content;\n  setChatTopic(chatTopic)\n  uni.$emit('dialogue_template_html', content)\n  uni.navigateBack()\n\n}\n\nonLoad(() => {\n  uni.showLoading({\n    title: \"加载中\",\n  });\n  const chatTopic = getChatTopic();\n  const array = chatTopic.array;\n  data.value = groupDates(array);\n  uni.hideLoading()\n})\n\nconst groupDates = (dates) => {\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(today.getDate() - 1);\n  const groupedDates = {\n    today: [],\n    yesterday: [],\n    other: []\n  };\n  dates.forEach(dateObj => {\n    const date = new Date(dateObj.date);\n    if (date.toDateString() === today.toDateString()) {\n      groupedDates.today.push(dateObj);\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      groupedDates.yesterday.push(dateObj);\n    } else {\n      groupedDates.other.push(dateObj);\n    }\n  });\n  return groupedDates;\n}\n\n\n</script>\n\n<template>\n  <view class=\"container\">\n    <view class=\"model\" v-if=\"data.today.length>0\">\n      <view class=\"title\">\n        今天\n      </view>\n      <view class=\"box\" v-for=\"(item,index) in data.today \" :key=\"index\" @click=\"handoffTopic(item.id)\">\n        <view class=\"icon\">\n          <image src=\"/static/icon/document.svg\"/>\n        </view>\n        <view class=\"prompt\">\n          {{ item.title ? item.title : '未命名的会话主题' }}\n        </view>\n        <view class=\"date\">\n          {{ item.time }}\n        </view>\n      </view>\n    </view>\n    <view class=\"model\" v-if=\"data.yesterday.length>0\">\n      <view class=\"title\">\n        昨天\n      </view>\n      <view class=\"box\" v-for=\"(item,index) in data.yesterday \" :key=\"index\" @click=\"handoffTopic(item.id)\">\n        <view class=\"icon\">\n          <image src=\"/static/icon/document.svg\"/>\n        </view>\n        <view class=\"prompt\">\n          {{ item.title ? item.title : '未命名的会话主题' }}\n        </view>\n        <view class=\"date\">\n          {{ item.time }}\n        </view>\n      </view>\n    </view>\n    <view class=\"model\" v-if=\"data.other.length>0\">\n      <view class=\"title\">\n        上一次\n      </view>\n      <view class=\"box\" v-for=\"(item,index) in data.yesterday \" :key=\"index\" @click=\"handoffTopic(item.id)\">\n        <view class=\"icon\">\n          <image src=\"/static/icon/document.svg\"/>\n        </view>\n        <view class=\"prompt\">\n          {{ item.title ? item.title : '未命名的会话主题' }}\n        </view>\n        <view class=\"date\">\n          {{ item.date }}\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n\n<style scoped lang=\"scss\">\n.container {\n  padding: 30rpx;\n  color: white;\n}\n\n.model {\n  margin-bottom: 50rpx\n}\n\n.box {\n  background: #1e1e1e;\n  margin-top: 30rpx;\n  border-radius: 20rpx;\n  padding: 30rpx;\n  display: flex;\n  align-items: center;\n}\n\n.icon {\n  width: 10%;\n\n}\n\n.icon > image {\n  width: 40rpx;\n  height: 40rpx\n}\n\n.prompt {\n  width: 65%;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.date {\n  width: 25%;\n  text-align: right;\n  color: #6d6d6d\n}\n\n.title {\n  font-size: 38rpx;\n  font-weight: bold;\n}\n\n</style>\n","import MiniProgramPage from 'E:/0/beifen/0/0Files/2025答辩/ts-ts/miniProgram/pages/dialogue/view/chatTopicView.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getChatTopic","setChatTopic","uni","onLoad"],"mappings":";;;;;;;AAKA,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,OAAO,CAAE;AAAA,MACT,OAAO,CAAE;AAAA,MACT,WAAW,CAAE;AAAA,IACf,CAAC;AAED,UAAM,eAAe,CAAC,OAAO;AAE3B,YAAM,YAAYC,gBAAAA;AAClB,YAAM,QAAQ,UAAU,MAAM,UAAU,UAAQ,KAAK,OAAO,EAAE;AAC9D,gBAAU,QAAQ;AAClB,YAAM,UAAU,UAAU,MAAM,KAAK,EAAE;AACvCC,sBAAAA,aAAa,SAAS;AACtBC,0BAAI,MAAM,0BAA0B,OAAO;AAC3CA,oBAAAA,MAAI,aAAc;AAAA,IAEpB;AAEAC,kBAAAA,OAAO,MAAM;AACXD,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACX,CAAG;AACD,YAAM,YAAYF,gBAAAA;AAClB,YAAM,QAAQ,UAAU;AACxB,WAAK,QAAQ,WAAW,KAAK;AAC7BE,oBAAAA,MAAI,YAAa;AAAA,IACnB,CAAC;AAED,UAAM,aAAa,CAAC,UAAU;AAC5B,YAAM,QAAQ,oBAAI;AAClB,YAAM,YAAY,IAAI,KAAK,KAAK;AAChC,gBAAU,QAAQ,MAAM,QAAS,IAAG,CAAC;AACrC,YAAM,eAAe;AAAA,QACnB,OAAO,CAAE;AAAA,QACT,WAAW,CAAE;AAAA,QACb,OAAO,CAAE;AAAA,MACb;AACE,YAAM,QAAQ,aAAW;AACvB,cAAM,OAAO,IAAI,KAAK,QAAQ,IAAI;AAClC,YAAI,KAAK,aAAY,MAAO,MAAM,aAAY,GAAI;AAChD,uBAAa,MAAM,KAAK,OAAO;AAAA,QAChC,WAAU,KAAK,aAAc,MAAK,UAAU,aAAY,GAAI;AAC3D,uBAAa,UAAU,KAAK,OAAO;AAAA,QACzC,OAAW;AACL,uBAAa,MAAM,KAAK,OAAO;AAAA,QAChC;AAAA,MACL,CAAG;AACD,aAAO;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDA,GAAG,WAAW,eAAe;"}